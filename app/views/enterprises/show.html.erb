<h2 class="text-2xl font-bold mb-4"><%= @enterprise.name %> (<%= @enterprise.provider.capitalize %>)</h2>

<div class="mb-4">
  <%= link_to "Edit Enterprise", edit_enterprise_path(@enterprise), class: "bg-yellow-600 px-4 py-2 rounded hover:bg-yellow-700 mr-2" %>
  <%= link_to "Delete Enterprise", enterprise_path(@enterprise), data: { turbo_method: :delete, confirm: "Are you sure?" }, class: "bg-red-600 px-4 py-2 rounded hover:bg-red-700" %>
</div>

<h3 class="text-xl font-semibold mb-2">Devices</h3>

<%= link_to "➕ Enroll Device", new_enterprise_device_path(@enterprise), class: "bg-blue-600 px-4 py-2 rounded mb-4 inline-block" %>

<% if @devices.any? %>
  <table class="w-full table-auto border border-gray-700 rounded-lg">
    <thead class="bg-gray-800">
      <tr>
        <th class="p-3">Device ID</th>
        <th class="p-3">Platform</th>
        <th class="p-3">Enrolled</th>
        <th class="p-3">Last Seen</th>
        <th class="p-3">Actions</th>
      </tr>
    </thead>
    <tbody>
      <% @devices.each do |d| %>
        <tr class="border-t border-gray-700">
          <td class="p-3"><%= d.device_id %></td>
          <td class="p-3"><%= d.platform.capitalize %></td>
          <td class="p-3"><%= d.enrolled ? "✅" : "❌" %></td>
          <td class="p-3"><%= d.last_seen&.strftime("%Y-%m-%d %H:%M") %></td>
          <td class="p-3">
            <%= link_to "View Device", enterprise_device_path(@enterprise, d), class: "text-blue-400 hover:text-blue-600" %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <p class="text-gray-400">No devices enrolled yet.</p>
<% end %>

<%= link_to "← Back to Enterprises", enterprises_path, class: "text-blue-400 mt-4 block" %>
